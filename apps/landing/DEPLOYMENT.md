# Развертывание на Coolify

Этот документ описывает процесс развертывания landing приложения на Coolify.

## Предварительные требования

- Coolify сервер настроен и работает
- Docker установлен на сервере
- Git репозиторий доступен для Coolify

## Способ 1: Через Coolify Dashboard (Рекомендуется)

### 1. Создание нового проекта в Coolify

1. Войдите в Coolify dashboard
2. Нажмите "New Project"
3. Выберите "Application"
4. Выберите ваш Git репозиторий

### 2. Настройка проекта

- **Source**: Выберите ваш Git репозиторий
- **Branch**: `main` или ваша основная ветка
- **Build Pack**: `Dockerfile`
- **Root Directory**: `apps/landing`

### 3. Настройка переменных окружения

Добавьте следующие переменные:
```
NODE_ENV=production
PORT=3000
```

### 4. Настройка портов

- **Port**: `3000`
- **Expose Port**: `3000`

### 5. Запуск развертывания

Нажмите "Deploy" и дождитесь завершения сборки.

## Способ 2: Через Docker Compose

Если вы хотите развернуть локально или на сервере:

```bash
# Клонируйте репозиторий
git clone <your-repo-url>
cd lnd-boilerplate/apps/landing

# Соберите и запустите
docker-compose up -d --build

# Проверьте статус
docker-compose ps
```

## Способ 3: Ручная сборка Docker

```bash
# Сборка образа
docker build -t landing-app .

# Запуск контейнера
docker run -d -p 3000:3000 --name landing-app landing-app
```

## Проверка работоспособности

После развертывания проверьте:

1. **Health Check**: `http://your-domain:3000/api/health`
2. **Главная страница**: `http://your-domain:3000`
3. **Логи**: В Coolify dashboard или `docker logs <container-name>`

## Мониторинг

- **Логи**: Доступны в Coolify dashboard
- **Метрики**: CPU, Memory, Network usage
- **Health Checks**: Автоматические проверки каждые 30 секунд

## Troubleshooting

### Проблема: Приложение не запускается
- Проверьте логи в Coolify dashboard
- Убедитесь, что порт 3000 доступен
- Проверьте переменные окружения

### Проблема: Ошибки сборки
- Убедитесь, что все зависимости установлены
- Проверьте версию Node.js (требуется 18+)
- Проверьте .dockerignore файл

### Проблема: Приложение недоступно
- Проверьте настройки портов в Coolify
- Убедитесь, что firewall разрешает трафик
- Проверьте DNS настройки

## Обновление приложения

Для обновления:

1. Запушьте изменения в Git
2. В Coolify dashboard нажмите "Redeploy"
3. Или используйте автоматическое развертывание при push в main ветку

## Безопасность

- Приложение запускается от непривилегированного пользователя
- Настроены security headers
- Используется production режим Node.js
- Health checks предотвращают запуск неработающих контейнеров
